units metal
atom_style atomic
boundary f f f
newton on



read_data input_cnt_without_topology.txt
pair_style airebo 3.0 
include cnt_utilities.txt




group carbon_atoms type 1
variable zmax equal 10
variable zmin equal -10
region rtop block  INF INF INF INF ${zmax} INF
region rbot block  INF INF INF INF INF ${zmin}
region rmid block  INF INF INF INF ${zmin} ${zmax} 


group cnt_top region rtop
group cnt_bot region rbot
group cnt_mid region rmid


variable zmax_del equal ${zmax}-2
variable zmin_del equal ${zmin}+2
region rdel block INF INF INF INF ${zmin_del} ${zmax_del}
group rdel region rdel
delete_atoms random fraction 0.02 no rdel NULL 2793


reset_atoms id sort yes
velocity cnt_mid create 300 48455 mom yes rot yes

fix mynve1 cnt_top nve
fix mynve2 cnt_bot nve
fix mynvt cnt_mid nvt temp 300 300 0.1



fix mysf1 cnt_top setforce 0 0 0
fix mysf2 cnt_bot setforce 0 0 0
velocity cnt_top set 0 0 0
velocity cnt_bot set 0 0 0


variable Lcnt equal xcm(cnt_top,z)-xcm(cnt_bot,z)
variable Fcnt equal f_mysf1[1]-f_mysf2[1]


dump viz all image 1000 myimage.*.ppm type type size 1000 400 zoom 4 shiny 0.3 adiam 1.5 box no 0.01 view 90 0 shiny 0.1 fsaa yes
dump_modify viz pad 5 backcolor white acolor 1 gray





compute Tmid cnt_mid temp
thermo 1000
thermo_style custom step temp etotal v_Lcnt v_Fcnt
thermo_modify temp Tmid line yaml

timestep 0.0001
run 5000


velocity cnt_top set  0 0 1.5
velocity cnt_bot set  0 0 -1.5

run 50000


